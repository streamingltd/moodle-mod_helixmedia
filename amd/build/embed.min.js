/**
 * @package
 * @copyright  2023 Tim Williams Streaming LTD
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_helixmedia/embed",["jquery","core/modal_factory","core/templates"],(function($,ModalFactory,Templates){var module={instances:[],first:!0,medialinstance:function($,params){var minst={};return minst.params=params,minst.firsttime=!0,minst.openmodal=function(evt){evt.preventDefault(),minst.modal.show(),minst.firsttime&&($("#mod_helixmedia_launchframe_"+minst.params.preid+minst.params.extraid).attr("src",minst.params.launchurl),minst.firsttime=!1)},minst.initmodal=async function(){minst.modal=await ModalFactory.create({title:minst.params.title,body:Templates.render("mod_helixmedia/modalinner",minst.params),large:!0})},minst.bind=function(){$("#helixmedia_ltimodal_"+minst.params.preid+minst.params.extraid).click(minst.openmodal),$("#helixmedia_ltimodalimg_"+minst.params.preid+minst.params.extraid).click(minst.openmodal),minst.initmodal()},minst.unbind=function(){$("#helixmedia_ltimodal_"+minst.params.preid+minst.params.extraid).unbind("click"),$("#helixmedia_ltimodalimg_"+minst.params.preid+minst.params.extraid).unbind("click")},module.textfit($),minst},textfit:function($){$(".helixmedia_fittext").each((function(){var w2=$(this).width();if($(this).text().length>16&&w2<240){var ratio=w2/240;$(this).css("font-size",ratio+"em")}else $(this).css("font-size","large")}))},init:function(frameid,launchurl,thumburl,resID,userID,statusURL,oauthConsumerKey,doStatusCheck,sessionURL,sessionFreq,resDelay,extraID,title,library,origin,bs5){void 0!==module.instances[resID+extraID]&&module.instances[resID+extraID].unbind();var params={};params.launchurl=launchurl,params.userID=userID,params.preid=resID,params.extraid=extraID,params.title=title,params.bs5=bs5,library||doStatusCheck?params.larger=!0:params.viewonly=!0;var medialhandler=module.medialinstance($,params);module.instances[resID+extraID]=medialhandler,medialhandler.bind()}};return module}));

//# sourceMappingURL=embed.min.js.map